<div style="width: 100%;display: flex;justify-content: center;margin-top: 5px;">
  <div class="example-boundary" style="border: red solid 2px;position: absolute"
       [ngStyle]="{'width':pageWidth +'px','height':pageHeight+'px'}">
    <div *ngFor="let b of box" class="example-box" id="box-{{b.id}}" (click)="clickBox(b)"
         (contextmenu)="onRightClick($event, {content: b.id})"
         [ngStyle]="{'width': b.valueWidth+'px','height': b.valueHeight+ 'px','background-color': b.color,'color':b.fontColor,
       'border-radius':b.radius + '%','left':b.x + 'px','top':b.y + 'px','z-index':b.layer}"
         style="display: flex;position: inherit">
      <span [ngStyle]="{'font-size': b.fontSize + 'PX'}">{{b.text}}</span>
    </div>
  </div>
</div>


<div style="visibility: hidden; position: fixed;"
     [style.left.px]="menuTopLeftPosition.x"
     [style.top.px]="menuTopLeftPosition.y"
     [matMenuTriggerFor]="rightMenu">
</div>


<mat-menu #rightMenu="matMenu">
  <ng-template matMenuContent let-item="item">
    <button mat-menu-item>{{item.content}}</button>
    <button mat-menu-item (click)="removeBox(item.content)">Remove</button>
  </ng-template>
</mat-menu>


<div *ngIf="!!toolRemove" style="width: 50px; height: 50px; position: fixed; bottom: 10px; right: 10px; border-radius: 50%;
    background-color: #75aaf8; display: flex; align-items: center; justify-content: center; color: #FFFFFF;cursor: pointer;"
     matTooltip="ToolBox">
  <span (click)="toolRemove = !toolRemove" class="material-icons">add</span>
</div>
<div *ngIf="!toolRemove" class="example-box-tool" cdkDrag [ngStyle]="{'height':toolShort ? '55px':'640px'}">
  <span class="material-icons" style="cursor: pointer;color: #ccc" (click)="toolShort = !toolShort">short_text</span>
  <span class="material-icons" style="cursor: pointer;color: #ccc" (click)="toolRemove = !toolRemove">remove</span>
  <div style="width: 100%;text-align: center; padding: 5px;"><span style="font-size: 20px">Tool Box</span></div>
  <div class="example-handle-tool" cdkDragHandle>
    <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
      <path
        d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path>
      <path d="M0 0h24v24H0z" fill="none"></path>
    </svg>
  </div>
  <div class="row" [ngStyle]="{'display':toolShort ? 'none':'flex'}">
    <div style="width: 20%">
      <h4>Item {{box.length}}</h4>
      <div style="border:black solid 1px;overflow: auto;height: 515px;width: 80px;margin-right: 20px;">
        <div *ngFor="let item of box;index as i" (click)="clickBox(item)"
             style="border: black solid 3px;margin: 2px;height: 50px;padding: 10px"
             [ngStyle]="{'background-color':item.color,'border-color': (item.id == boxId? '#52f9ff' : '#52f9ff10') }">
          {{i + 1}}
        </div>
        <button mat-stroked-button style="width: 80px" [matMenuTriggerFor]="menu">ADD</button>
      </div>
    </div>
    <div *ngIf="!!box.length" style="width: 40%">
      <div class="row">
        <div class="col-12">
          <div style="display: flex;">
            <span style="font-size: 12px;margin-right: 5px;">Width</span>
            <input matInput style="width: 80px;" [(ngModel)]="box[boxId].valueWidth" type="number">
          </div>
          <mat-slider
            style="width: 100%;"
            [thumbLabel]="true"
            [max]="pageWidth"
            [min]="1"
            [(ngModel)]="box[boxId].valueWidth"
            (input)="change($event,'valueWidth')"
            [value]="200"
            aria-labelledby="example-name-label">
          </mat-slider>
        </div>
        <div class="col-12">
          <div style="display: flex;">
            <span style="font-size: 12px;margin-right: 5px;">Height</span>
            <input matInput style="width: 80px;" [(ngModel)]="box[boxId].valueHeight" type="number">
          </div>
          <mat-slider
            style="width: 100%;"
            [thumbLabel]="true"
            [max]="pageHeight"
            [min]="1"
            [(ngModel)]="box[boxId].valueHeight"
            (input)="change($event,'valueHeight')"
            [value]="200"
            aria-labelledby="example-name-label">
          </mat-slider>
        </div>
        <div class="col-12">
          <div style="display: flex;">
            <span style="font-size: 12px;margin-right: 5px;">X</span>
            <input matInput style="width: 80px;" [(ngModel)]="box[boxId].x" type="number">
          </div>
          <mat-slider
            style="width: 100%;"
            [thumbLabel]="true"
            [max]="pageWidth"
            [min]="1"
            [(ngModel)]="box[boxId].x"
            (input)="change($event,'x')"
            [value]="200"
            aria-labelledby="example-name-label">
          </mat-slider>
        </div>
        <div class="col-12">
          <div style="display: flex;">
            <span style="font-size: 12px;margin-right: 5px;">Y</span>
            <input matInput style="width: 80px;" [(ngModel)]="box[boxId].y" type="number">
          </div>
          <mat-slider
            style="width: 100%;"
            [thumbLabel]="true"
            [max]="pageHeight"
            [min]="1"
            [invert]="false"
            [vertical]="false"
            [(ngModel)]="box[boxId].y"
            (input)="change($event,'y')"
            [value]="200"
            aria-labelledby="example-name-label">
          </mat-slider>
        </div>
        <div class="col-12">
          <div style="display: flex;">
            <span style="font-size: 12px;margin-right: 5px;">Radius</span>
            <input matInput style="width: 80px;" [(ngModel)]="box[boxId].radius" type="number">
          </div>
          <mat-slider
            style="width: 100%;"
            [thumbLabel]="true"
            [max]="50"
            [min]="0"
            [(ngModel)]="box[boxId].radius"
            (input)="change($event,'radius')"
            [value]="200"
            aria-labelledby="example-name-label">
          </mat-slider>
        </div>
      </div>
    </div>
    <div *ngIf="!!box.length" style="width: 40%">
      <div class="row">
        <div class="col-12">
          <mat-form-field appearance="outline" style="width: 98%;">
            <mat-label>Text</mat-label>
            <input type="text" matInput [(ngModel)]="box[boxId].text" placeholder="Text"
                   (change)="change($event,'text')">
          </mat-form-field>
        </div>
        <div class="col-4">
          <mat-form-field appearance="outline" style="width: 98%;">
            <mat-label>Font Size</mat-label>
            <input type="number" matInput [(ngModel)]="box[boxId].fontSize" placeholder="fontSize"
                   (change)="change($event,'fontSize')">
          </mat-form-field>
        </div>
        <div class="col-4">
          <mat-form-field appearance="outline" style="width: 98%;">
            <mat-label>Font Color</mat-label>
            <input type="color" matInput [(ngModel)]="box[boxId].fontColor" (change)="change($event,'fontColor')">
            <mat-hint>{{box[boxId].fontColor}}</mat-hint>
          </mat-form-field>
        </div>
        <div class="col-4">
          <mat-form-field appearance="outline" style="width: 98%;">
            <mat-label>Color</mat-label>
            <input type="color" matInput [(ngModel)]="box[boxId].color" (change)="change($event,'color')">
            <mat-hint>{{box[boxId].color}}</mat-hint>
          </mat-form-field>
        </div>
        <div class="col-12">
          <div style="font-size: 12px">Layer</div>
          <mat-grid-list cols="5">
            <mat-grid-tile *ngFor="let l of layer">
              <button [ngStyle]="{'background-color':(l === this.box[this.boxId]?.layer ? '#EFEFEF':'#FFFFFF') }"
                      mat-raised-button
                      (click)="change(l,'layer')">{{l}}</button>
            </mat-grid-tile>
            <mat-grid-tile>
              <button style="background-color: #FFFFFF" mat-raised-button (click)="layer.push(layer.length)"
                      [value]="'+'">+
              </button>
            </mat-grid-tile>
          </mat-grid-list>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <!--          <button mat-raised-button [matMenuTriggerFor]="menu">Add</button>-->

        </div>
      </div>
    </div>
  </div>
</div>
<mat-menu #menu="matMenu">
  <button mat-menu-item (click)="addBox('New')">New Box</button>
  <button mat-menu-item [disabled]="!box.length" (click)="addBox('Cope')">Cope Select Current</button>
</mat-menu>
